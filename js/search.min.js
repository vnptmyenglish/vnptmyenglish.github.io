/*! HelpSmith Web Help System 3.0
* http://www.helpsmith.com
* Copyright (c) 2007-2019 Divcom Software */
var tSearchMatch={ALLWORDS:{value:0},EXACT:{value:1},PHRASE:{value:2}};function tWordIndex(a,b,c){this.index=a;this.exactMatch=b;this.indexInTerm=c;this.clone=function(){return new tWordIndex(this.index,this.exactMatch,this.indexInTerm)}}function searchResultItem(a,b){this.searchEngine=a;this.topicIndex=b;this.wordIndexes=[];this.rank=0}
searchResultItem.prototype={getTitle:function(){return gTopicTable[this.topicIndex][2]},getIconClass:function(){var a=gTopicTable[this.topicIndex][4];return a?a:""},getRef:function(a){var b=gTopicTable[this.topicIndex][3];if("undefined"!==typeof a&&""!=a)var c=this.getWordsParamValue(),b=b+("?"+a+"="+c);return b},getWordsParamValue:function(){var a="";if(this.searchEngine.searchMatch==tSearchMatch.PHRASE)for(var b=0;b<this.searchEngine.searchWords.length;b++)var c=this.searchEngine.searchWords[b],
a=a+(c.leadDelim+c.word);else for(b=0;b<this.wordIndexes.length;b++)a+=gWordIndex[this.wordIndexes[b].index][0]+"["+this.wordIndexes[b].indexInTerm+"]";return escape(a)},addWordIndex:function(a){var b=arrayFindItem(this.wordIndexes,a,function(a,b){return a.index-b.index});b.found?(b=this.wordIndexes[b.index],!b.exactMatch&&a.exactMatch&&(b.exactMatch=!0,b.indexInTerm=a.indexInTerm,--this.rank,this.rank+=100)):(this.wordIndexes.splice(b.index,0,a.clone()),this.rank=a.exactMatch?this.rank+100:this.rank+
1)},updateRank:function(a,b){if(a.length){var c=this.getTitle();if(c){for(var c=c.replace(/(\s+)/g," "),c=c.replace(/^\s+|\s+$/g,""),d=/([^\s\.;,:()_{}"\/\\|<>!\?\[\]\-\+\*=%&@#]+)([\s\.;,:()_{}"\/\\|<>!\?\[\]\-\+\*=%&@#])?/g,f,e=[];f=d.exec(c);)e.push(f[1].toLowerCase());switch(b){case tSearchMatch.PHRASE:c=0;f=!0;var h=a[0].word.toLowerCase(),g=0;do{g=e.indexOf(h,g);if(0>g||e.length-g-1<a.length-1){f=!1;break}for(var n=1,d=g+1;d<e.length&&n<a.length;d++,n++)if(e[d]!=a[n].word.toLowerCase()){f=!1;
break}if(f){c+=100;break}g++}while(1);f&&(e=e.length-a.length,c-=e);this.rank+=c;break;default:f=function(a){for(var b=!0,c=0;c<a.length;c++)if(!a[c].exactly){b=!1;break}return b};for(var k=function(a,b){for(var c=0;c<b.length;c++)if(a==b[c].word)return c;return-1},c=0,n=[],d=0;d<a.length;d++)for(var h=a[d].word.toLowerCase(),l=0;l<e.length;l++)if(g=e[l],str=b==tSearchMatch.EXACT?g:g.substr(0,h.length),str==h){var m=g.length==h.length,g=k(h,n);0<=g?(g=n[g],g.offs.push({value:l,exactly:m})):n.push({word:h,
offs:[{value:l,exactly:m}]})}for(d=0;d<n.length;d++){g=n[d];k=!1;for(l=0;l<g.offs.length;l++)if(h=g.offs[l],g.exactly){k=!0;break}c+=k?1E4:1E3}k=[];for(d=n.length-1;0<=d;d--)for(g=n[d],l=0;l<g.offs.length;l++)if(h=g.offs[l],d==n.length-1)m=[],m.push(h),k.push(m);else for(m=0;m<k.length;m++)h.value==k[m][0].value-1&&k[m].splice(0,0,h);for(d=0;d<k.length;d++)m=k[d],a.length==m.length&&(c+=f(m)?5E4:5E3);1==k.length&&(a.length==e.length?c+=f(k[0])?1E6:5E5:(e=e.length-a.length,c-=e));this.rank+=c}}}}};
function searchEngine(){this.searchWords=[];this.searchMatch=null;this.resultItems=[]}
searchEngine.prototype={parseQuery:function(a,b){this.searchWords=[];var c=$.trim(a),d,f=!1;'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)?(d=!1,f=b=!0):"["==c.charAt(0)&&"]"==c.charAt(c.length-1)&&(d=!0,b=!1,f=!0);this.searchMatch=b?tSearchMatch.PHRASE:d?tSearchMatch.EXACT:tSearchMatch.ALLWORDS;f&&(c=c.substring(1,c.length-1));if(0==c.length)return!1;c=c.replace(/(\s+)/g," ");c=c.replace(/^\s+|\s+$/g,"");d=/([^\s\.;,:()_{}"\/\\|<>!\?\[\]\-\+\*=%&@#]+)([\s\.;,:()_{}"\/\\|<>!\?\[\]\-\+\*=%&@#])?/g;for(var e=
"";f=d.exec(c);){var h={word:f[1].toLowerCase(),leadDelim:e},e="undefined"===typeof f[2]?"":f[2];this.searchWords.push(h)}return 0<this.searchWords.length},getAlphaIndexes:function(a){a=arrayFindItem(gAlphaIndex,a.charAt(0),function(a,b){return compareStrings(a[0],b)});var b={start:-1,end:-1};return a.found&&(b.start=gAlphaIndex[a.index][1],b.end=gAlphaIndex[a.index][2],0<=b.start&&b.start<=b.end)?b:null},findWordPart:function(a,b){var c=this.getAlphaIndexes(a);if(!c)return null;for(var d=[],f=c.start;f<=
c.end;f++){var e=gWordIndex[f][0];e.substr(0,a.length)==a&&d.push(new tWordIndex(f,e.length==a.length,b))}return 0==d.length?null:d},findMasterWord:function(a){var b=this.getAlphaIndexes(a);if(!b)return-1;a=arrayFindItem(gWordIndex,a,function(a,b){return compareStrings(a[0],b)},!1,b.start,b.end);return a.found?a.index:-1},mergePhraseIndex:function(a){if(1<a.length){for(var b=[],c=a[a.length-1],d=0;d<c.length;d++){for(var f=c[d],e=0;e<a.length-1;e++){for(var h=!1,g=0;g<a[e].length;g++)if(a[e][g]==
f){h=!0;break}if(!h)break}h&&b.push(f)}return b}return 0<a.length?a[0]:null},getSequenceTopicIndex:function(a,b,c){var d=!1,f=this.findMasterWord(b.word);if(0<=f){a=gWordIndex[a][2];for(var e=0;e<a.length;e++){var h="string"==typeof a[e][1],g=" ";h&&(g=a[e][1]);if(a[e][0]==f&&g==b.leadDelim){h?c.push(a[e][2]):c.push(a[e][1]);d=!0;break}}d||(f=-1)}return f},findPhrase:function(){for(var a=[],b=-1,c=0;c<this.searchWords.length;c++)if(0>b?(b=this.findMasterWord(this.searchWords[c].word),0<=b&&a.push(gWordIndex[b][1])):
b=this.getSequenceTopicIndex(b,this.searchWords[c],a),0>b){a=[];break}if(a=this.mergePhraseIndex(a))for(c=0;c<a.length;c++)this.getResultItem(a[c])},findExactWords:function(){for(var a=0;a<this.searchWords.length;a++){var b=this.findMasterWord(this.searchWords[a].word);0<=b&&this.createResultItems([new tWordIndex(b,!0,a)])}},findPartsOfWords:function(){for(var a=0;a<this.searchWords.length;a++){var b=this.findWordPart(this.searchWords[a].word,a);b&&this.createResultItems(b)}},createResultItems:function(a){for(var b=
0;b<a.length;b++)for(var c=gWordIndex[a[b].index][1],d=0;d<c.length;d++)this.getResultItem(c[d]).addWordIndex(a[b])},getResultItem:function(a){var b=arrayFindItem(this.resultItems,a,function(a,b){return a.topicIndex-b});if(b.found)return this.resultItems[b.index];a=new searchResultItem(this,a);this.resultItems.splice(b.index,0,a);return a},findWords:function(){this.resultItems=[];switch(this.searchMatch){case tSearchMatch.PHRASE:this.findPhrase();break;case tSearchMatch.EXACT:this.findExactWords();
break;default:this.findPartsOfWords()}return 0<this.resultItems.length},search:function(a,b){this.parseQuery(a,b)&&this.findWords();for(var c=0;c<this.resultItems.length;c++)this.resultItems[c].updateRank(this.searchWords,this.searchMatch);return 0<this.resultItems.length}};