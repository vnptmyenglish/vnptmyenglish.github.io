/*! HelpSmith Web Help System 3.0
* http://www.helpsmith.com
* Copyright (c) 2007-2019 Divcom Software */
(function(e){function d(a,c){var b=this;b.$container=a;b.activeNode=null;b.allowFx=!0;b.options=e.extend({expandSpeed:100,expandOnDblClick:!0,autoCollapse:!1,noButtons:!1,noIcons:!1,onNodeRender:null,onQueryExpand:null,onActivate:null,onDeactivate:null,onClick:null,onExpand:null},c);b.$container.addClass("hstree-container");b.$root=b.$container.find("> ul").addClass("hstree-root");a.find("li").each(function(){var a=e(this);a.addClass("hstree-node");a.is(":last-child")&&a.addClass("hstree-last");var c=
a.find("> ul").detach(),d=a.find("> a").detach();c.length&&a.addClass("hstree-has-children");var g=a.attr("title");a.removeAttr("title");if(d.length)var f=d;else d=a.contents().detach(),f=e('<a href="#"></a>').append(d);g?f.attr("title",g):f.removeAttr("title");a.data("title",f.text());var h=null;b.options.noButtons||(h=e('<div class="hstree-node-btn"></div>'),h.append("<i></i>"));g=null;b.options.noIcons||(g=e('<div class="hstree-node-icon"></div>'),g.append("<i></i>"));var l=e('<div class="hstree-node-title"></div>');
l.append(f);d=e('<div class="hstree-node-cnt-w"></div>');g&&d.append(g);d.append(l);l=e('<div class="hstree-node-cnt"></div>');l.append(d);h&&a.append(h);a.append(l,c);f.on("click",function(c){c.preventDefault();$this=e(this);if("function"===typeof b.options.onClick)b.options.onClick(a);b.setActiveNode(a)}).on("keydown",function(a){function c(a){a.find("> .hstree-node-cnt a").focus()}$this=e(this);var d=$this.closest(".hstree-node");if(d.length)switch(a.which){case 32:a.preventDefault();b.setActiveNode(d);
break;case 38:a.preventDefault();(d=b.getPrevNode(d,!0))&&c(d);break;case 40:a.preventDefault();(d=b.getNextNode(d,!0))&&c(d);break;case 37:a.preventDefault();d.find("> ul:visible").length?b.expandNode(d,!1):(d=b.getParent(d))&&c(d);break;case 39:a.preventDefault(),(a=b.getFirstChild(d,!0))?c(a):b.expandNode(d)}});if(b.options.expandOnDblClick)f.on("dblclick",function(c){c.preventDefault();$this=e(this);b.toggleNode(a)});if(g)g.on("click",function(d){d.preventDefault();!h&&c.length?b.toggleNode(a):
(f.get(0).click(),f.focus())});if(c.length&&(a.addClass("hstree-collapsed"),h))h.on("click",function(){b.toggleNode(a);f.focus()});if("function"===typeof b.options.onNodeRender)b.options.onNodeRender(a)})}function m(a,c,b,d){if(!c||a.isNodeValid(c))if(c?(a=c.find("> ul"),c=1==a.length&&a.is(":visible")):(a=a.$root,c=!0),1==a.length&&("undefined"==d||!d||c)&&(b=a.find("> .hstree-node:"+b+"-child"),1==b.length))return b;return null}function n(a,c){if("function"===typeof a.options.onActivate)a.options.onActivate(c)}
d.prototype.getFirstChild=function(a,c){return m(this,a,"first",c)};d.prototype.getLastChild=function(a,c){return m(this,a,"last",c)};d.prototype.getNextSibling=function(a){return this.isNodeValid(a)&&(a=a.next(),1==a.length)?a:null};d.prototype.getPrevSibling=function(a){return this.isNodeValid(a)&&(a=a.prev(),1==a.length)?a:null};d.prototype.getParent=function(a){return this.isNodeValid(a)&&(a=a.parent("ul:not(.hstree-root)").parent(".hstree-node"),a.length)?a:null};d.prototype.getNextNode=function(a,
c){var b=this.getFirstChild(a,c);if(b)return b;if(!a)return null;for(;;){if(b=this.getNextSibling(a))return b;if(b=this.getParent(a))a=b;else return null}};d.prototype.getPrevNode=function(a,c){var b=this.getPrevSibling(a);if(b){var d=this.getLastChild(b,c);return d?d:b}return(b=this.getParent(a))&&!b.is(this.$root)?b:null};d.prototype.isNodeValid=function(a){return a&&1==a.length&&a.hasClass("hstree-node")};d.prototype.expandNode=function(a,c){if(!this.isNodeValid(a))return!1;var b=a.find("> ul");
if(!b.length)return!1;"undefined"===typeof c&&(c=!0);if("function"===typeof this.options.onQueryExpand&&!1===this.options.onQueryExpand(a,c))return!1;var d=this.allowFx&&0<this.options.expandSpeed,e=b.is(":visible");c?e||(a.removeClass("hstree-collapsed").addClass("hstree-expanded"),d?b.slideDown(this.options.expandSpeed):b.show(),this.collapseOther(a)):e&&(a.removeClass("hstree-expanded").addClass("hstree-collapsed"),d?b.slideUp(this.options.expandSpeed):b.hide())};d.prototype.toggleNode=function(a){var c=
a.find("> ul");return c.length?this.expandNode(a,!c.is(":visible")):!1};d.prototype.getActiveNode=function(){return this.activeNode};d.prototype.setActiveNode=function(a,c){if(!a||this.isNodeValid(a)){if(!this.activeNode&&!a||this.activeNode&&a&&this.activeNode.is(a))return!0;if(this.activeNode){var b=this.activeNode;this.activeNode.removeClass("hstree-active");this.activeNode=null;if("function"===typeof this.options.onDeactivate)this.options.onDeactivate(b)}return a?this.isNodeValid(a)?(this.activeNode=
a,a.addClass("hstree-active"),"undefined"!==typeof c&&c||n(this,a),!0):!1:!0}};d.prototype.reActivateNode=function(){return this.activeNode?(n(this,this.activeNode),!0):!1};d.prototype.collapseOther=function(a){if(this.options.autoCollapse&&this.isNodeValid(a)){var c=this;a.siblings().each(function(){c.expandNode(e(this),!1)})}};d.prototype.getNodeByData=function(a,c){return this.$root.find(".hstree-node[data-"+a+'="'+c+'"]').first()};d.prototype.viewNode=function(a){var c=this;if(c.isNodeValid(a)){var b=
c.allowFx;try{c.allowFx=!1,a.parents(".hstree-node").each(function(){c.expandNode(e(this))})}finally{c.allowFx=b}return!0}return!1};d.prototype.getChildren=function(a){var c={children:[],list:null};"undefined"!==typeof a&&a?this.isNodeValid(a)&&(c.list=a.find("> ul")):c.list=this.$root;c.list&&c.list.length&&c.list.find("> li.hstree-node").each(function(){c.children.push(this)});return c};d.prototype.sortChildren=function(a,c){var b=this.getChildren(c);if(b.children.length){e(b.children[b.children.length-
1]).removeClass("hstree-last");for(var d=[],k=0;k<b.children.length;k++)d.push(e(b.children[k]).detach());d.sort(a);b.list.append(d);b.list.find("> li:last-child").addClass("hstree-last")}};var k={init:function(a){return this.each(function(){$this=e(this);!$this.data("hsTree")&&$this.find("> ul").length&&$this.data("hsTree",new d($this,a))})},getActiveNode:function(){var a=this.first().data("hsTree");return a?a.getActiveNode():null},setActiveNode:function(a,c){var b=this.first().data("hsTree");if(b){var d=
b.setActiveNode(a,c);a&&d&&b.viewNode(a);return d}return!1},reActivateNode:function(){var a=this.first().data("hsTree");a&&a.reActivateNode()},getNodeByData:function(a,c){var b=this.first().data("hsTree");return b?b.getNodeByData(a,c):null},expandNode:function(a,c){var b=this.first().data("hsTree");return b?b.expandNode(a,c):null},getChildren:function(a){var c=this.first().data("hsTree");return c?c.getChildren(a).children:[]},sortChildren:function(a,c){var b=this.first().data("hsTree");b&&b.sortChildren(a,
c)}};e.fn.hsTree=function(a){if(k[a])return k[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)e.error("Method "+a+" does not exist on jQuery.hsTree");else return k.init.apply(this,arguments)}})(jQuery);